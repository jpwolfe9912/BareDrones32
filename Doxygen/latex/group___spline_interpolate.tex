\hypertarget{group___spline_interpolate}{}\doxysection{Cubic Spline Interpolation}
\label{group___spline_interpolate}\index{Cubic Spline Interpolation@{Cubic Spline Interpolation}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___spline_interpolate_ga4ef053a783b251b085454b28f8aecb94}{arm\+\_\+spline\+\_\+f32}} (\mbox{\hyperlink{structarm__spline__instance__f32}{arm\+\_\+spline\+\_\+instance\+\_\+f32}} $\ast$S, const \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$xq, \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$p\+Dst, uint32\+\_\+t block\+Size)
\begin{DoxyCompactList}\small\item\em Processing function for the floating-\/point cubic spline interpolation. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___spline_interpolate_ga5370a3c4a213e15bf57726406ec52ae0}{arm\+\_\+spline\+\_\+init\+\_\+f32}} (\mbox{\hyperlink{structarm__spline__instance__f32}{arm\+\_\+spline\+\_\+instance\+\_\+f32}} $\ast$S, \mbox{\hyperlink{interpolation__functions_8h_a545cad4aaf64955a2d2e93d7e806bcd7}{arm\+\_\+spline\+\_\+type}} type, const \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$x, const \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$y, uint32\+\_\+t n, \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$coeffs, \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$temp\+Buffer)
\begin{DoxyCompactList}\small\item\em Initialization function for the floating-\/point cubic spline interpolation. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Spline interpolation is a method of interpolation where the interpolant is a piecewise-\/defined polynomial called \char`\"{}spline\char`\"{}.

\begin{DoxyParagraph}{Introduction}

\end{DoxyParagraph}
Given a function f defined on the interval \mbox{[}a,b\mbox{]}, a set of n nodes x(i) where a=x(1)\texorpdfstring{$<$}{<}x(2)\texorpdfstring{$<$}{<}...\texorpdfstring{$<$}{<}x(n)=b and a set of n values y(i) = f(x(i)), a cubic spline interpolant S(x) is defined as\+:


\begin{DoxyPre}
         S1(x)       x(1) < x < x(2)
 S(x) =   ...         
         Sn-\/1(x)   x(n-\/1) < x < x(n)
 \end{DoxyPre}


where


\begin{DoxyPre} 
 Si(x) = a\_i+b\_i(x-\/xi)+c\_i(x-\/xi)^2+d\_i(x-\/xi)^3    i=1, ..., n-\/1
 \end{DoxyPre}


\begin{DoxyParagraph}{Algorithm}

\end{DoxyParagraph}
Having defined h(i) = x(i+1) -\/ x(i)


\begin{DoxyPre}
 h(i-\/1)c(i-\/1)+2[h(i-\/1)+h(i)]c(i)+h(i)c(i+1) = 3/h(i)*[a(i+1)-\/a(i)]-\/3/h(i-\/1)*[a(i)-\/a(i-\/1)]    i=2, ..., n-\/1
 \end{DoxyPre}


It is possible to write the previous conditions in matrix form (Ax=B). In order to solve the system two boundary conidtions are needed.
\begin{DoxyItemize}
\item Natural spline\+: S1\textquotesingle{}\textquotesingle{}(x1)=2$\ast$c(1)=0 ; Sn\textquotesingle{}\textquotesingle{}(xn)=2$\ast$c(n)=0 In matrix form\+:
\end{DoxyItemize}


\begin{DoxyPre}
 |  1        0         0  ...    0         0           0     ||  c(1)  | |                        0                        |
 | h(0) 2[h(0)+h(1)] h(1) ...    0         0           0     ||  c(2)  | |      3/h(2)*[a(3)-\/a(2)]-\/3/h(1)*[a(2)-\/a(1)]      |
 | ...      ...       ... ...   ...       ...         ...    ||  ...   |=|                       ...                       |
 |  0        0         0  ... h(n-\/2) 2[h(n-\/2)+h(n-\/1)] h(n-\/1) || c(n-\/1) | | 3/h(n-\/1)*[a(n)-\/a(n-\/1)]-\/3/h(n-\/2)*[a(n-\/1)-\/a(n-\/2)] |
 |  0        0         0  ...    0         0           1     ||  c(n)  | |                        0                        |
 \end{DoxyPre}



\begin{DoxyItemize}
\item Parabolic runout spline\+: S1\textquotesingle{}\textquotesingle{}(x1)=2$\ast$c(1)=S2\textquotesingle{}\textquotesingle{}(x2)=2$\ast$c(2) ; Sn-\/1\textquotesingle{}\textquotesingle{}(xn-\/1)=2$\ast$c(n-\/1)=Sn\textquotesingle{}\textquotesingle{}(xn)=2$\ast$c(n) In matrix form\+:
\end{DoxyItemize}


\begin{DoxyPre}
 |  1       -\/1         0  ...    0         0           0     ||  c(1)  | |                        0                        |
 | h(0) 2[h(0)+h(1)] h(1) ...    0         0           0     ||  c(2)  | |      3/h(2)*[a(3)-\/a(2)]-\/3/h(1)*[a(2)-\/a(1)]      |
 | ...      ...       ... ...   ...       ...         ...    ||  ...   |=|                       ...                       |
 |  0        0         0  ... h(n-\/2) 2[h(n-\/2)+h(n-\/1)] h(n-\/1) || c(n-\/1) | | 3/h(n-\/1)*[a(n)-\/a(n-\/1)]-\/3/h(n-\/2)*[a(n-\/1)-\/a(n-\/2)] |
 |  0        0         0  ...    0        -\/1           1     ||  c(n)  | |                        0                        |
 \end{DoxyPre}


A is a tridiagonal matrix (a band matrix of bandwidth 3) of size N=n+1. The factorization algorithms (A=LU) can be simplified considerably because a large number of zeros appear in regular patterns. The Crout method has been used\+: 1) Solve LZ=B


\begin{DoxyPre}
 u(1,2) = A(1,2)/A(1,1)
 z(1)   = B(1)/l(11)

 FOR i=2, ..., N-\/1
   l(i,i)   = A(i,i)-\/A(i,i-\/1)u(i-\/1,i)
   u(i,i+1) = a(i,i+1)/l(i,i)
   z(i)     = [B(i)-\/A(i,i-\/1)z(i-\/1)]/l(i,i)

 l(N,N) = A(N,N)-\/A(N,N-\/1)u(N-\/1,N)
 z(N)   = [B(N)-\/A(N,N-\/1)z(N-\/1)]/l(N,N)
 \end{DoxyPre}


2) Solve UX=Z


\begin{DoxyPre}
 c(N)=z(N)

 FOR i=N-\/1, ..., 1
   c(i)=z(i)-\/u(i,i+1)c(i+1) 
 \end{DoxyPre}


c(i) for i=1, ..., n-\/1 are needed to compute the n-\/1 polynomials. b(i) and d(i) are computed as\+:
\begin{DoxyItemize}
\item b(i) = \mbox{[}y(i+1)-\/y(i)\mbox{]}/h(i)-\/h(i)$\ast$\mbox{[}c(i+1)+2$\ast$c(i)\mbox{]}/3
\item d(i) = \mbox{[}c(i+1)-\/c(i)\mbox{]}/\mbox{[}3$\ast$h(i)\mbox{]} Moreover, a(i)=y(i).
\end{DoxyItemize}

\begin{DoxyParagraph}{Behaviour outside the given intervals}

\end{DoxyParagraph}
It is possible to compute the interpolated vector for x values outside the input range (xq\texorpdfstring{$<$}{<}x(1); xq\texorpdfstring{$>$}{>}x(n)). The coefficients used to compute the y values for xq$<$x(1) are going to be the ones used for the first interval, while for xq$>$x(n) the coefficients used for the last interval.

\begin{DoxyParagraph}{Initialization function}

\end{DoxyParagraph}
The initialization function takes as input two arrays that the user has to allocate\+: {\ttfamily coeffs} will contain the b, c, and d coefficients for the (n-\/1) intervals (n is the number of known points), hence its size must be 3$\ast$(n-\/1); {\ttfamily temp\+Buffer} is temporally used for internal computations and its size is n+n-\/1.

\begin{DoxyParagraph}{}

\end{DoxyParagraph}
The x input array must be strictly sorted in ascending order and it must not contain twice the same value (x(i)\texorpdfstring{$<$}{<}x(i+1)). 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{group___spline_interpolate_ga4ef053a783b251b085454b28f8aecb94}\label{group___spline_interpolate_ga4ef053a783b251b085454b28f8aecb94}} 
\index{Cubic Spline Interpolation@{Cubic Spline Interpolation}!arm\_spline\_f32@{arm\_spline\_f32}}
\index{arm\_spline\_f32@{arm\_spline\_f32}!Cubic Spline Interpolation@{Cubic Spline Interpolation}}
\doxysubsubsection{\texorpdfstring{arm\_spline\_f32()}{arm\_spline\_f32()}}
{\footnotesize\ttfamily void arm\+\_\+spline\+\_\+f32 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structarm__spline__instance__f32}{arm\+\_\+spline\+\_\+instance\+\_\+f32}} $\ast$}]{S,  }\item[{const \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$}]{xq,  }\item[{\mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$}]{p\+Dst,  }\item[{uint32\+\_\+t}]{block\+Size }\end{DoxyParamCaption})}



Processing function for the floating-\/point cubic spline interpolation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em S} & points to an instance of the floating-\/point spline structure. \\
\hline
\mbox{\texttt{ in}}  & {\em xq} & points to the x values of the interpolated data points. \\
\hline
\mbox{\texttt{ out}}  & {\em p\+Dst} & points to the block of output data. \\
\hline
\mbox{\texttt{ in}}  & {\em block\+Size} & number of samples of output data.\\
\hline
\mbox{\texttt{ in}}  & {\em S} & points to an instance of the floating-\/point spline structure. \\
\hline
\mbox{\texttt{ in}}  & {\em xq} & points to the x values ot the interpolated data points. \\
\hline
\mbox{\texttt{ out}}  & {\em p\+Dst} & points to the block of output data. \\
\hline
\mbox{\texttt{ in}}  & {\em block\+Size} & number of samples of output data. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{arm__spline__interp__f32_8c_source_l00146}{146}} of file \mbox{\hyperlink{arm__spline__interp__f32_8c_source}{arm\+\_\+spline\+\_\+interp\+\_\+f32.\+c}}.

\mbox{\Hypertarget{group___spline_interpolate_ga5370a3c4a213e15bf57726406ec52ae0}\label{group___spline_interpolate_ga5370a3c4a213e15bf57726406ec52ae0}} 
\index{Cubic Spline Interpolation@{Cubic Spline Interpolation}!arm\_spline\_init\_f32@{arm\_spline\_init\_f32}}
\index{arm\_spline\_init\_f32@{arm\_spline\_init\_f32}!Cubic Spline Interpolation@{Cubic Spline Interpolation}}
\doxysubsubsection{\texorpdfstring{arm\_spline\_init\_f32()}{arm\_spline\_init\_f32()}}
{\footnotesize\ttfamily void arm\+\_\+spline\+\_\+init\+\_\+f32 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structarm__spline__instance__f32}{arm\+\_\+spline\+\_\+instance\+\_\+f32}} $\ast$}]{S,  }\item[{\mbox{\hyperlink{interpolation__functions_8h_a545cad4aaf64955a2d2e93d7e806bcd7}{arm\+\_\+spline\+\_\+type}}}]{type,  }\item[{const \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$}]{x,  }\item[{const \mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$}]{y,  }\item[{uint32\+\_\+t}]{n,  }\item[{\mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$}]{coeffs,  }\item[{\mbox{\hyperlink{arm__math__types_8h_a4611b605e45ab401f02cab15c5e38715}{float32\+\_\+t}} $\ast$}]{temp\+Buffer }\end{DoxyParamCaption})}



Initialization function for the floating-\/point cubic spline interpolation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em S} & points to an instance of the floating-\/point spline structure. \\
\hline
\mbox{\texttt{ in}}  & {\em type} & type of cubic spline interpolation (boundary conditions) \\
\hline
\mbox{\texttt{ in}}  & {\em x} & points to the x values of the known data points. \\
\hline
\mbox{\texttt{ in}}  & {\em y} & points to the y values of the known data points. \\
\hline
\mbox{\texttt{ in}}  & {\em n} & number of known data points. \\
\hline
\mbox{\texttt{ in}}  & {\em coeffs} & coefficients array for b, c, and d \\
\hline
\mbox{\texttt{ in}}  & {\em temp\+Buffer} & buffer array for internal computations \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{arm__spline__interp__init__f32_8c_source_l00065}{65}} of file \mbox{\hyperlink{arm__spline__interp__init__f32_8c_source}{arm\+\_\+spline\+\_\+interp\+\_\+init\+\_\+f32.\+c}}.

